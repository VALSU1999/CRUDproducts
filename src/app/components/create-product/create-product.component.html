
  <h2 class="display-4 w-auto mb-4">{{title}}</h2>


<div class="container">
  <form [formGroup]="createProduct" (ngSubmit)="addProduct()">
    <div class="row">
      <div class="col-12">
        <div class="row">
          <div class="col-md-6">
            <div class="row">
              <div class="col-md-6 mb-4">
                <label for="sku" class="form-label">SKU</label>
                <fieldset [disabled]="disabledSku">
                <input
                  type="number"
                  class="form-control px-2"
                  id="sku"
                  placeholder="12345"
                  formControlName="sku"
                  min="1" pattern="^[0-9]+"
                  [ngClass]="{'ng-invalid': isValueSku}"
                  >
                </fieldset>
                  <span class="text-danger" *ngIf="!isValueSku && !createProduct.controls['sku'].hasError('min') && createProduct.controls['sku'].invalid && createProduct.controls['sku'].touched" >
                    El SKU es obligatorio
                  </span>
                  <span class="text-danger" *ngIf="createProduct.controls['sku'].hasError('min')" >
                    Debe ser mayor que 0
                  </span>
                  <span class="text-danger" *ngIf="isValueSku && !createProduct.controls['sku'].hasError('min')" >
                    El sku se repite
                  </span>


              </div>
              <div class="col-md-6 mb-4">
                <label for="name" class="form-label">Nombre del producto</label>
                <input type="text" class="form-control px-2" id="name" placeholder="Polo Talla L" formControlName="name" >

                <div class="text-danger" *ngIf="!createProduct.controls['name'].hasError('pattern') &&createProduct.controls['name'].invalid && createProduct.controls['name'].touched">
                  El nombre del producto es obligatorio
                </div>
                <div class="text-danger" *ngIf="createProduct.controls['name'].hasError('pattern')">
                  No se acepta caracteres especiales
                </div>

              </div>
              <div class="col-md-6 mb-4">
                <label for="stock" class="form-label">Stock</label>
                <input type="number" class="form-control px-2" id="stock" placeholder="30" formControlName="stock" min="1" pattern="^[0-9]+">

                <div class="text-danger" *ngIf="!createProduct.controls['stock'].hasError('min') &&createProduct.controls['stock'].invalid && createProduct.controls['stock'].touched">
                  El stock es obligatorio
                </div>
                <span class="text-danger" *ngIf="createProduct.controls['stock'].hasError('min')" >
                  Debe ser mayor que 0
                </span>
              </div>
              <div class="col-md-6 mb-4">
                <label for="salePrice" class="form-label">Precio</label>
                <input type="number" class="form-control px-2" id="salePrice" placeholder="25.00" formControlName="salePrice" min="1"  step="0.01">

                <div class="text-danger" *ngIf="!createProduct.controls['salePrice'].hasError('min') && createProduct.controls['salePrice'].invalid && createProduct.controls['salePrice'].touched">
                  El Precio es obligatorio
                </div>
                <span class="text-danger" *ngIf="createProduct.controls['salePrice'].hasError('min')" >
                  Debe ser mayor que 0
                </span>
              </div>
              <div class="col-12 mb-4">

                  <label for="description">Descripción</label>
                  <textarea class="form-control px-2" id="description" rows="2" formControlName="description"></textarea>

                <div class="text-danger" *ngIf="createProduct.controls['description'].invalid && createProduct.controls['description'].touched">
                  La Descripción es obligatorio
                </div>

              </div>

              <div class="col-md-6 mb-4">
                <label for="offerPrice" class="form-label">Precio Oferta</label>
                <input type="number" class="form-control px-2" id="offerPrice" placeholder="23.00 " formControlName="offerPrice" min="1" step="0.01" [ngClass]="{'ng-invalid': getOfferPrice}">

                <span class="text-danger" *ngIf="createProduct.controls['offerPrice'].hasError('min')" >
                  Debe ser mayor que 0
                </span>
                <span class="text-danger" *ngIf="getOfferPrice" >
                  Ingrese precio oferta
                </span>
              </div>
              <div class="col-md-6 mb-4">
                <label for="offerEndDate" class="form-label">Fecha fin de Oferta</label>
                <input type="date" class="form-control px-2" id="offerEndDate" formControlName="offerEndDate"  [ngClass]="{'ng-invalid': messageDate}" [ngClass]="{'ng-invalid': getOfferEndDate}" >
                <span class="text-danger" *ngIf="messageDate" >
                  La fecha fin debe ser mayor a la fecha actual
                </span>
                <span class="text-danger" *ngIf="getOfferEndDate" >
                  Ingrese fecha fin oferta
                </span>
              </div>
            </div>
          </div>
          <div class="col-md-6 my-4 my-md-0">
            <div class="custom-dropzone container-image"  [expandable]="true" ngx-dropzone [accept]="'image/jpeg,image/jpg,image/png'" (change)="onSelect($event)"  >
              <ngx-dropzone-label>
                <div>
                  <h2>Subir Imagenes <i class="fas fa-upload"></i></h2>
                </div>
              </ngx-dropzone-label>
              <ngx-dropzone-image-preview  ngProjectAs="ngx-dropzone-preview" *ngFor="let f of files" [file]="f" [removable]="true" (removed)="onRemove(f)" >
                <ngx-dropzone-label >{{ f.name }} ({{ f.type }})</ngx-dropzone-label>
              </ngx-dropzone-image-preview>
            </div>
          </div>

        </div>
      </div>
      <div class="col-12 mt-3">
        <div class="row">
          <div class="col-9">
            <button type="submit" class="btn btn-primary" [disabled]="!createProduct.valid" [ngClass]="{'disabled': !isValue}" [ngClass]="{'disabled': messageDate}" >Guardar</button>
            <button class="ms-3 btn btn-danger" [routerLink]="['/list']">Cancelar</button>

          </div>

          <div class="col-3 d-flex justify-content-end" *ngIf="loading">
            <div class="spinner-border " role="status">
              <span class="sr-only">Cargando...</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>

